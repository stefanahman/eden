#!/bin/bash
# MCP wrapper: GitHub server for Eden
# Fetches token from 1Password at runtime â€” never stored on disk.
set -euo pipefail

export PATH="$HOME/.eden/bin:$HOME/.volta/bin:$HOME/.local/bin:/opt/homebrew/bin:/usr/local/bin:/usr/bin:/bin"
source op-mcp-warmup

GITHUB_PERSONAL_ACCESS_TOKEN=$(op_read 'op://Developer/eden-github-mcp-token/credential' my.1password.com 'Eden: GitHub MCP')
export GITHUB_PERSONAL_ACCESS_TOKEN

exec pnpm dlx @modelcontextprotocol/server-github

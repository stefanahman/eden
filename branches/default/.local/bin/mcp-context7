#!/bin/bash
# MCP wrapper: Context7 documentation server
# Fetches API key from 1Password at runtime â€” never stored on disk.
set -euo pipefail

export PATH="$HOME/.eden/bin:$HOME/.volta/bin:$HOME/.local/bin:/opt/homebrew/bin:/usr/local/bin:/usr/bin:/bin"
source op-mcp-warmup

CONTEXT7_API_KEY=$(op_read 'op://Developer/context7-mcp-api-key/credential' my.1password.com 'Eden: Context7 MCP')
export CONTEXT7_API_KEY

exec npx -y mcp-remote https://mcp.context7.com/mcp \
    --header "CONTEXT7_API_KEY: $CONTEXT7_API_KEY"
